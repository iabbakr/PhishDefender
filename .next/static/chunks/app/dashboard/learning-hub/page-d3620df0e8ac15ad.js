(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[742],{1928:(e,s,r)=>{Promise.resolve().then(r.bind(r,3007))},2346:(e,s,r)=>{"use strict";r.d(s,{w:()=>n});var t=r(5155),i=r(2115),l=r(7489),a=r(9434);let n=i.forwardRef((e,s)=>{let{className:r,orientation:i="horizontal",decorative:n=!0,...d}=e;return(0,t.jsx)(l.b,{ref:s,decorative:n,orientation:i,className:(0,a.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",r),...d})});n.displayName=l.b.displayName},3007:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>_});var t=r(5155),i=r(6695),l=r(6766),a=r(285),n=r(5300),d=r(5481),c=r(9968),o=r(172),h=r(7223),u=r(1573),m=r(254),x=r(4301),g=r(8044),v=r(6874),p=r.n(v),j=r(2115),f=r(5718),b=r(7481),N=r(5317),w=r(2437),y=r(8030),A=r(1805),k=r(2346),C=r(9434),E=r(6126),R=r(10),L=r(7877),T=r(4477);let M=(0,T.createServerReference)("0009873597d9945e8d8c98619c293efad59587e89b",T.callServer,void 0,T.findSourceMapURL,"deleteAllArticlesAction");function S(e){let{resource:s,isAdmin:r,onDelete:u}=e,[m,x]=(0,j.useTransition)();return(0,t.jsxs)(i.Zp,{className:"flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.default,{src:s.image,alt:s.title,width:600,height:400,className:"aspect-video w-full object-cover","data-ai-hint":s.imageHint}),"Video"===s.type&&(0,t.jsx)("div",{className:"absolute bottom-2 right-2 rounded-md bg-black/50 px-2 py-1 text-xs text-white",children:s.duration})]}),(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:["Article"===s.type?(0,t.jsx)(n.A,{className:"h-4 w-4"}):(0,t.jsx)(d.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:s.type})]}),(0,t.jsx)(i.ZB,{children:s.title}),(0,t.jsx)(i.BT,{className:"line-clamp-2",children:s.description})]}),(0,t.jsxs)(i.wL,{className:"mt-auto flex gap-2",children:[(0,t.jsx)(a.$,{asChild:!0,className:"w-full",variant:"secondary",children:(0,t.jsxs)(p(),{href:"/dashboard/learning-hub/".concat(s.id),children:["Learn More ",(0,t.jsx)(c.A,{className:"ml-2 h-4 w-4"})]})}),r&&(0,t.jsxs)(R.Lt,{children:[(0,t.jsx)(R.tv,{asChild:!0,children:(0,t.jsx)(a.$,{variant:"destructive",size:"icon",disabled:m,children:m?(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(h.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(R.EO,{children:[(0,t.jsxs)(R.wd,{children:[(0,t.jsx)(R.r7,{children:"Are you sure?"}),(0,t.jsxs)(R.$v,{children:['This action cannot be undone. This will permanently delete the article titled "',s.title,'".']})]}),(0,t.jsxs)(R.ck,{children:[(0,t.jsx)(R.Zr,{children:"Cancel"}),(0,t.jsx)(R.Rx,{onClick:()=>{x(async()=>{await u(s.id)})},className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})}function Z(e){let{level:s,resources:r,userProgress:l,isLocked:a}=e,n=l.map(e=>r.find(s=>s.id===e)).filter(Boolean).filter(e=>e.path===s.path).length,d=s.maxArticles>0?n/s.maxArticles*100:0,c=r.filter(e=>e.path===s.path);return c.length>0&&c.length,(0,t.jsx)(p(),{href:a?"#":"/dashboard/learning-hub/path/".concat(s.path),className:(0,C.cn)("block group",a&&"pointer-events-none"),children:(0,t.jsxs)(i.Zp,{className:(0,C.cn)("transition-all",a&&"bg-muted/50 border-dashed",!a&&"hover:border-primary hover:shadow-lg"),children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(E.E,{variant:a?"secondary":"default",className:"mb-2",children:s.title}),(0,t.jsx)(i.ZB,{children:s.name}),(0,t.jsx)(i.BT,{children:s.description})]}),a?(0,t.jsx)(u.A,{className:"h-6 w-6 text-muted-foreground"}):(0,t.jsx)(m.A,{className:"h-6 w-6 text-green-500"})]})}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsx)("div",{className:"h-2 w-full bg-muted rounded-full",children:(0,t.jsx)("div",{className:"h-2 bg-primary rounded-full",style:{width:"".concat(d,"%")}})}),(0,t.jsxs)("span",{className:"flex-shrink-0",children:[n," / ",s.maxArticles]})]})}),(0,t.jsx)(i.wL,{children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground group-hover:text-primary transition-colors",children:a?"Complete previous levels to unlock":"Click to view articles for this level"})})]})})}function _(){var e;let{user:s,isAdmin:r}=(0,y.A)(),{toast:l}=(0,b.dj)(),[n,d]=(0,j.useTransition)(),[c,u]=(0,j.useTransition)(),[m,v]=(0,j.useState)([]),[C,E]=(0,j.useState)(null),[T,_]=(0,j.useState)(!0);(0,j.useEffect)(()=>{if(!s)return void _(!1);let e=(0,N.rJ)(w.db,"learningResources"),r=(0,N.P)(e,(0,N._M)("uid","==",null),(0,N.My)("createdAt","desc")),t=(0,N.P)(e,(0,N._M)("uid","==",s.uid),(0,N.My)("createdAt","desc")),i=(0,N.aQ)(r,e=>{let s=e.docs.map(e=>({...e.data(),id:e.id})),r=(0,N.aQ)(t,e=>{v(Array.from(new Map([...s,...e.docs.map(e=>({...e.data(),id:e.id}))].map(e=>[e.id,e])).values())),_(!1)},e=>{console.error("Error fetching user learning resources:",e),l({variant:"destructive",title:"Error",description:"Could not load your learning resources."}),_(!1)});return()=>r()},e=>{console.error("Error fetching public learning resources:",e),l({variant:"destructive",title:"Error",description:"Could not load public learning resources."}),_(!1)});return()=>i()},[s,l]),(0,j.useEffect)(()=>{if(s){let e=(0,N.aQ)((0,N.H9)(w.db,"users",s.uid),e=>{E(e.data())});return()=>e()}},[s]);let $=e=>{d(async()=>{if(!s)return void l({variant:"destructive",title:"Authentication Error",description:"You must be logged in to generate an article."});let r=await (0,f.c)(e);if("error"in r)l({variant:"destructive",title:"Generation Failed",description:r.error});else{let e={title:r.title,description:r.description,imageHint:r.imageHint,type:"Article",image:"https://picsum.photos/seed/".concat(Math.random(),"/600/400"),link:"#",content:r.content,uid:s.uid},i=await (0,N.gS)((0,N.rJ)(w.db,"learningResources"),{...e,createdAt:(0,N.O5)()});l({title:"New Article Generated!",description:'"'.concat(r.title,'" has been added to the learning hub.'),action:(0,t.jsx)(a.$,{asChild:!0,variant:"secondary",children:(0,t.jsx)(p(),{href:"/dashboard/learning-hub/".concat(i.id),children:"View"})})})}})},B=async e=>{let s=await (0,L.C)(e);s.error?l({variant:"destructive",title:"Deletion Failed",description:s.error}):l({title:"Article Deleted",description:"The article has been successfully removed."})},H=null!=(e=null==C?void 0:C.readArticles)?e:[],O=!0;return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Learning Hub"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Sharpen your skills with our guided learning path or browse all available resources."})]}),(0,t.jsxs)(a.$,{onClick:()=>$("General Cybersecurity"),disabled:n,className:"w-full sm:w-auto",children:[n?(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Generate Random Article"]})]}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-bold tracking-tight mb-4",children:"Your Learning Path"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T||!C?[void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"p-6",children:(0,t.jsx)(o.A,{className:"h-6 w-6 animate-spin"})})},s)):A.C.map(e=>{let s=m.filter(s=>s.path===e.path),r=H.map(e=>m.find(s=>s.id===e)).filter(s=>(null==s?void 0:s.path)===e.path),i=!(s.length>0)||r.length>=s.length,l=!O;return l||(O=i),(0,t.jsx)(Z,{level:e,resources:m,userProgress:H,isLocked:l},e.level)})})]}),(0,t.jsx)(k.w,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"All Resources"}),r&&(0,t.jsxs)(R.Lt,{children:[(0,t.jsx)(R.tv,{asChild:!0,children:(0,t.jsxs)(a.$,{variant:"destructive",disabled:c||0===m.length,children:[c?(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Clear All"]})}),(0,t.jsxs)(R.EO,{children:[(0,t.jsxs)(R.wd,{children:[(0,t.jsxs)(R.r7,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{})," Are you absolutely sure?"]}),(0,t.jsx)(R.$v,{children:"This action cannot be undone. This will permanently delete all learning resources from the database."})]}),(0,t.jsxs)(R.ck,{children:[(0,t.jsx)(R.Zr,{children:"Cancel"}),(0,t.jsx)(R.Rx,{onClick:()=>{u(async()=>{let e=await M();e.error?l({variant:"destructive",title:"Error",description:e.error}):l({title:"All Articles Cleared",description:"All learning resources have been deleted."})})},className:"bg-destructive hover:bg-destructive/90",children:"Yes, delete everything"})]})]})]})]}),T?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.Wu,{className:"p-0",children:(0,t.jsx)("div",{className:"aspect-video w-full bg-muted animate-pulse"})}),(0,t.jsxs)(i.aR,{children:[(0,t.jsx)("div",{className:"h-4 w-1/4 bg-muted animate-pulse mb-2"}),(0,t.jsx)("div",{className:"h-6 w-3/4 bg-muted animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-full bg-muted animate-pulse mt-2"}),(0,t.jsx)("div",{className:"h-4 w-2/3 bg-muted animate-pulse"})]}),(0,t.jsx)(i.wL,{children:(0,t.jsx)("div",{className:"h-10 w-full bg-muted animate-pulse"})})]},s))}):(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:m.map(e=>(0,t.jsx)(S,{resource:e,isAdmin:r,onDelete:B},e.id))})]})]})]})}},6126:(e,s,r)=>{"use strict";r.d(s,{E:()=>n});var t=r(5155);r(2115);var i=r(2085),l=r(9434);let a=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:r,...i}=e;return(0,t.jsx)("div",{className:(0,l.cn)(a({variant:r}),s),...i})}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,416,277,950,443,444,747,874,858,768,441,684,358],()=>s(1928)),_N_E=e.O()}]);