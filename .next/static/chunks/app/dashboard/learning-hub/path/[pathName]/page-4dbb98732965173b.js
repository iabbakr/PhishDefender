(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[841],{1287:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var a=r(5155),i=r(5695),s=r(1805),l=r(2115),n=r(5317),c=r(2437),d=r(6695),o=r(6766),u=r(285),h=r(5300),m=r(5481),p=r(9968),x=r(172),f=r(7223),g=r(2543),v=r(4301),j=r(6874),y=r.n(j),b=r(7481),w=r(5718),N=r(8030),A=r(7877),k=r(10);function R(e){let{resource:t,isAdmin:r,onDelete:i}=e,[s,n]=(0,l.useTransition)();return(0,a.jsxs)(d.Zp,{className:"flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.default,{src:t.image,alt:t.title,width:600,height:400,className:"aspect-video w-full object-cover","data-ai-hint":t.imageHint}),"Video"===t.type&&(0,a.jsx)("div",{className:"absolute bottom-2 right-2 rounded-md bg-black/50 px-2 py-1 text-xs text-white",children:t.duration})]}),(0,a.jsxs)(d.aR,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:["Article"===t.type?(0,a.jsx)(h.A,{className:"h-4 w-4"}):(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:t.type})]}),(0,a.jsx)(d.ZB,{children:t.title}),(0,a.jsx)(d.BT,{className:"line-clamp-2",children:t.description})]}),(0,a.jsxs)(d.wL,{className:"mt-auto flex gap-2",children:[(0,a.jsx)(u.$,{asChild:!0,className:"w-full",variant:"secondary",children:(0,a.jsxs)(y(),{href:"/dashboard/learning-hub/".concat(t.id),children:["Learn More ",(0,a.jsx)(p.A,{className:"ml-2 h-4 w-4"})]})}),r&&(0,a.jsxs)(k.Lt,{children:[(0,a.jsx)(k.tv,{asChild:!0,children:(0,a.jsx)(u.$,{variant:"destructive",size:"icon",disabled:s,children:s?(0,a.jsx)(x.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(f.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(k.EO,{children:[(0,a.jsxs)(k.wd,{children:[(0,a.jsx)(k.r7,{children:"Are you sure?"}),(0,a.jsxs)(k.$v,{children:['This action cannot be undone. This will permanently delete the article titled "',t.title,'".']})]}),(0,a.jsxs)(k.ck,{children:[(0,a.jsx)(k.Zr,{children:"Cancel"}),(0,a.jsx)(k.Rx,{onClick:()=>{n(async()=>{await i(t.id)})},className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})}function C(){let e=(0,i.useParams)().pathName,t=s.C.find(t=>t.path===e),[r,o]=(0,l.useState)([]),[h,m]=(0,l.useState)(!0),{toast:p}=(0,b.dj)(),[f,j]=(0,l.useTransition)(),{user:k,isAdmin:C}=(0,N.A)();(0,l.useEffect)(()=>{if(!t||!k)return void m(!1);let e=(0,n.rJ)(c.db,"learningResources"),r=(0,n.P)(e,(0,n._M)("path","==",t.path),(0,n._M)("uid","==",null)),a=(0,n.P)(e,(0,n._M)("path","==",t.path),(0,n._M)("uid","==",k.uid)),i=(0,n.aQ)(r,e=>{let t=e.docs.map(e=>({...e.data(),id:e.id})),r=(0,n.aQ)(a,e=>{o(Array.from(new Map([...t,...e.docs.map(e=>({...e.data(),id:e.id}))].map(e=>[e.id,e])).values())),m(!1)},e=>{console.error("Error fetching user resources for path:",e),p({variant:"destructive",title:"Error",description:"Could not load your articles for this path."}),m(!1)});return()=>r()},e=>{console.error("Error fetching public resources for path:",e),p({variant:"destructive",title:"Error",description:"Could not load articles for this path."}),m(!1)});return()=>i()},[t,k,p]),t||(0,i.notFound)();let M=async e=>{let t=await (0,A.C)(e);t.error?p({variant:"destructive",title:"Deletion Failed",description:t.error}):p({title:"Article Deleted",description:"The article has been successfully removed."})},D=e=>{j(async()=>{if(!k)return void p({variant:"destructive",title:"Authentication Error",description:"You must be logged in to generate an article."});if(r.length>=t.maxArticles)return void p({variant:"destructive",title:"Limit Reached",description:"You can only generate a maximum of ".concat(t.maxArticles," articles for this level.")});let i=await (0,w.c)(e);if("error"in i)p({variant:"destructive",title:"Generation Failed",description:i.error});else{let e={title:i.title,description:i.description,imageHint:i.imageHint,type:"Article",image:"https://picsum.photos/seed/".concat(Math.random(),"/600/400"),link:"#",content:i.content,path:t.path,uid:k.uid},r=await (0,n.gS)((0,n.rJ)(c.db,"learningResources"),{...e,createdAt:(0,n.O5)()});p({title:"New Article Generated!",description:'"'.concat(i.title,'" has been created.'),action:(0,a.jsx)(u.$,{asChild:!0,variant:"secondary",children:(0,a.jsx)(y(),{href:"/dashboard/learning-hub/".concat(r.id),children:"View"})})})}})},E=r.length<t.maxArticles;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(u.$,{asChild:!0,variant:"ghost",className:"mb-4",children:(0,a.jsxs)(y(),{href:"/dashboard/learning-hub",children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Back to Learning Hub"]})}),(0,a.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-primary",children:t.title}),(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:t.name}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:t.description})]}),E&&(0,a.jsxs)(u.$,{onClick:()=>D(t.topic),disabled:f,className:"w-full sm:w-auto",children:[f?(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Generate Article"]})]}),h?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.Wu,{className:"p-0",children:(0,a.jsx)("div",{className:"aspect-video w-full bg-muted animate-pulse"})}),(0,a.jsxs)(d.aR,{children:[(0,a.jsx)("div",{className:"h-4 w-1/4 bg-muted animate-pulse mb-2"}),(0,a.jsx)("div",{className:"h-6 w-3/4 bg-muted animate-pulse"}),(0,a.jsx)("div",{className:"h-4 w-full bg-muted animate-pulse mt-2"}),(0,a.jsx)("div",{className:"h-4 w-2/3 bg-muted animate-pulse"})]}),(0,a.jsx)(d.wL,{children:(0,a.jsx)("div",{className:"h-10 w-full bg-muted animate-pulse"})})]},t))}):r.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(e=>(0,a.jsx)(R,{resource:e,isAdmin:C,onDelete:M},e.id))}):(0,a.jsxs)("div",{className:"text-center py-16 border-2 border-dashed rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"No Articles Yet"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"There are no articles for this level right now."}),E&&(0,a.jsx)("p",{className:"text-muted-foreground",children:"Try generating one to get started!"})]})]})}},2278:(e,t,r)=>{"use strict";r.d(t,{rc:()=>_,ZD:()=>P,UC:()=>T,VY:()=>Z,hJ:()=>H,ZL:()=>V,bL:()=>L,hE:()=>F,l9:()=>S});var a=r(2115),i=r(6081),s=r(6101),l=r(5821),n=r(5185),c=r(5155);a.forwardRef((e,t)=>{let{children:r,...i}=e,s=a.Children.toArray(r),l=s.find(u);if(l){let e=l.props.children,r=s.map(t=>t!==l?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,c.jsx)(d,{...i,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,c.jsx)(d,{...i,ref:t,children:r})}).displayName="Slot";var d=a.forwardRef((e,t)=>{let{children:r,...i}=e;if(a.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r),l=function(e,t){let r={...t};for(let a in t){let i=e[a],s=t[a];/^on[A-Z]/.test(a)?i&&s?r[a]=(...e)=>{s(...e),i(...e)}:i&&(r[a]=i):"style"===a?r[a]={...i,...s}:"className"===a&&(r[a]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props);return r.type!==a.Fragment&&(l.ref=t?(0,s.t)(t,e):e),a.cloneElement(r,l)}return a.Children.count(r)>1?a.Children.only(null):null});d.displayName="SlotClone";var o=({children:e})=>(0,c.jsx)(c.Fragment,{children:e});function u(e){return a.isValidElement(e)&&e.type===o}var h="AlertDialog",[m,p]=(0,i.A)(h,[l.Hs]),x=(0,l.Hs)(),f=e=>{let{__scopeAlertDialog:t,...r}=e,a=x(t);return(0,c.jsx)(l.bL,{...a,...r,modal:!0})};f.displayName=h;var g=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=x(r);return(0,c.jsx)(l.l9,{...i,...a,ref:t})});g.displayName="AlertDialogTrigger";var v=e=>{let{__scopeAlertDialog:t,...r}=e,a=x(t);return(0,c.jsx)(l.ZL,{...a,...r})};v.displayName="AlertDialogPortal";var j=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=x(r);return(0,c.jsx)(l.hJ,{...i,...a,ref:t})});j.displayName="AlertDialogOverlay";var y="AlertDialogContent",[b,w]=m(y),N=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:i,...d}=e,u=x(r),h=a.useRef(null),m=(0,s.s)(t,h),p=a.useRef(null);return(0,c.jsx)(l.G$,{contentName:y,titleName:A,docsSlug:"alert-dialog",children:(0,c.jsx)(b,{scope:r,cancelRef:p,children:(0,c.jsxs)(l.UC,{role:"alertdialog",...u,...d,ref:m,onOpenAutoFocus:(0,n.m)(d.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=p.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,c.jsx)(o,{children:i}),(0,c.jsx)(O,{contentRef:h})]})})})});N.displayName=y;var A="AlertDialogTitle",k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=x(r);return(0,c.jsx)(l.hE,{...i,...a,ref:t})});k.displayName=A;var R="AlertDialogDescription",C=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=x(r);return(0,c.jsx)(l.VY,{...i,...a,ref:t})});C.displayName=R;var M=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=x(r);return(0,c.jsx)(l.bm,{...i,...a,ref:t})});M.displayName="AlertDialogAction";var D="AlertDialogCancel",E=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:i}=w(D,r),n=x(r),d=(0,s.s)(t,i);return(0,c.jsx)(l.bm,{...n,...a,ref:d})});E.displayName=D;var O=e=>{let{contentRef:t}=e,r="`".concat(y,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(y,"` by passing a `").concat(R,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(y,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},L=f,S=g,V=v,H=j,T=N,_=M,P=E,F=k,Z=C},2543:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4301:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},4477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return a.callServer},createServerReference:function(){return s},findSourceMapURL:function(){return i.findSourceMapURL}});let a=r(3806),i=r(1818),s=r(4979).createServerReference},5300:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},5481:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},5691:(e,t,r)=>{Promise.resolve().then(r.bind(r,1287))},7223:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9968:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[992,416,277,950,443,444,747,874,768,441,684,358],()=>t(5691)),_N_E=e.O()}]);