(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[179],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>o,r:()=>c});var i=s(5155),r=s(2115),a=s(4253),n=s(2085),l=s(9434);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:o=!1,...d}=e,u=o?a.DX:"button";return(0,i.jsx)(u,{className:(0,l.cn)(c({variant:r,size:n,className:s})),ref:t,...d})});o.displayName="Button"},2437:(e,t,s)=>{"use strict";s.d(t,{j:()=>m,db:()=>f});var i=s(3915),r=s(3004),a=s(5317),n=s(5594);let l=n.z.object({NEXT_PUBLIC_FIREBASE_API_KEY:n.z.string().min(1),NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:n.z.string().min(1),NEXT_PUBLIC_FIREBASE_PROJECT_ID:n.z.string().min(1),NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:n.z.string().min(1),NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:n.z.string().min(1),NEXT_PUBLIC_FIREBASE_APP_ID:n.z.string().min(1)}),c={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyCXrvLqIa0uwEQ8HEnxu4qxrZ9zrvCcZr0",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"phishdefender-mfjms.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"phishdefender-mfjms",NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:"phishdefender-mfjms.appspot.com",NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:"636470351357",NEXT_PUBLIC_FIREBASE_APP_ID:"1:636470351357:web:29a13366a0b7e7038ff594"},o=l.safeParse(c);if(!o.success)throw console.error("Invalid client environment variables:",o.error.flatten().fieldErrors),Error("Invalid client environment variables.");let d={apiKey:c.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:c.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:c.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:c.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:c.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:c.NEXT_PUBLIC_FIREBASE_APP_ID},u=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)(d),m=(0,r.xI)(u),f=(0,a.aU)(u)},4289:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var i=s(5155),r=s(2115),a=s(285),n=s(6695),l=s(2741),c=s(154),o=s(9434);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(l.bL,{className:(0,o.cn)("grid gap-2",s),...r,ref:t})});d.displayName=l.bL.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(l.q7,{ref:t,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,i.jsx)(l.C1,{className:"flex items-center justify-center",children:(0,i.jsx)(c.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});u.displayName=l.q7.displayName;var m=s(5057),f=s(4944),p=s(1467),h=s(5078),x=s(8376),g=s(4371),y=s(7569);let N=(0,s(2085).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),v=r.forwardRef((e,t)=>{let{className:s,variant:r,...a}=e;return(0,i.jsx)("div",{ref:t,role:"alert",className:(0,o.cn)(N({variant:r}),s),...a})});v.displayName="Alert";let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("h5",{ref:t,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})});w.displayName="AlertTitle";let E=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",s),...r})});E.displayName="AlertDescription";var A=s(8030),j=s(5317),S=s(2437),b=s(7481);function _(e){let{questions:t,topicTitle:s,onFinish:l}=e,{user:c}=(0,A.A)(),{toast:o}=(0,b.dj)(),[N,_]=(0,r.useState)(0),[I,T]=(0,r.useState)(null),[R,B]=(0,r.useState)(0),[C,P]=(0,r.useState)(!1),[k,L]=(0,r.useState)(!1),D=t[N],U=I===D.correctAnswer,F=async()=>{if(L(!0),c)try{let e=(0,j.H9)(S.db,"users",c.uid);await (0,j.BN)(e,{quizScores:{[s]:R}},{merge:!0}),o({title:"Quiz Score Saved!",description:"You scored ".concat(R,"/").concat(t.length,' on "').concat(s,'". Check your profile for rank updates.')})}catch(e){console.error("Failed to save quiz score:",e),o({variant:"destructive",title:"Error",description:"Could not save your quiz score."})}};return k?(0,i.jsxs)(n.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,i.jsxs)(n.aR,{className:"items-center",children:[(0,i.jsx)(p.A,{className:"h-16 w-16 text-primary"}),(0,i.jsx)(n.ZB,{className:"text-2xl",children:"Quiz Completed!"}),(0,i.jsxs)(n.BT,{children:['You finished the "',s,'" quiz.']})]}),(0,i.jsxs)(n.Wu,{className:"text-center",children:[(0,i.jsxs)("p",{className:"text-4xl font-bold",children:[R," / ",t.length]}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Your Score"})]}),(0,i.jsx)(n.wL,{children:(0,i.jsxs)(a.$,{onClick:()=>{L(!1),l()},className:"w-full",children:[(0,i.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Back to Topics"]})})]}):(0,i.jsxs)(n.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(f.k,{value:(N+1)/t.length*100,className:"mb-4"}),(0,i.jsxs)(n.ZB,{children:["Question ",N+1]}),(0,i.jsx)(n.BT,{className:"text-lg",children:D.question})]}),(0,i.jsxs)(n.Wu,{className:"space-y-4",children:[(0,i.jsx)(d,{value:null!=I?I:"",onValueChange:T,disabled:C,children:D.options.map((e,t)=>{let s=I===e,r=D.correctAnswer===e,a=r?(0,i.jsx)(x.A,{className:"text-green-500"}):(0,i.jsx)(g.A,{className:"text-destructive"});return(0,i.jsxs)(m.J,{className:"flex items-center gap-4 rounded-lg border p-4 cursor-pointer transition-colors ".concat(C&&r?"border-green-500 bg-green-500/10":""," ").concat(C&&s&&!r?"border-destructive bg-destructive/10":""),children:[(0,i.jsx)(u,{value:e}),(0,i.jsx)("span",{children:e}),C&&(s||r)&&(0,i.jsx)("span",{className:"ml-auto",children:a})]},t)})}),C&&D.rationale&&(0,i.jsxs)(v,{className:"mt-4 border-l-4 border-blue-500 bg-blue-500/10",children:[(0,i.jsx)(y.A,{className:"h-4 w-4 text-blue-600"}),(0,i.jsx)(w,{className:"text-blue-700",children:"Rationale"}),(0,i.jsx)(E,{className:"text-blue-700",children:D.rationale})]})]}),(0,i.jsx)(n.wL,{children:(0,i.jsx)(a.$,{onClick:()=>{C?N<t.length-1?(_(N+1),T(null),P(!1)):F():I&&(P(!0),U&&B(R+1))},disabled:!I,className:"w-full",children:C?N<t.length-1?"Next Question":"Finish Quiz":"Submit Answer"})})]})}var I=s(6606),T=s(3576),R=s(286),B=s(8639),C=s(2493),P=s(5292),k=s(7480),L=s(8044),D=s(389),U=s(6736),F=s(9615),z=s(7082),O=s(1573),M=s(3338),X=s(6950),H=s(9876),q=s(2682),Q=s(7724),G=s(9968),Z=s(172),V=s(4477);let K=(0,V.createServerReference)("601c091f922e5986a19d6f04d07269e40ee55e25e6",V.callServer,void 0,V.findSourceMapURL,"generateQuizAction"),W={questions:[],topic:""},Y=[{topic:"General Phishing Knowledge",title:"Phishing Fundamentals",description:"Test your basic knowledge of common phishing threats.",difficulty:"Easy",icon:(0,i.jsx)(I.A,{className:"h-10 w-10 text-primary"})},{topic:"Password Security Basics",title:"Password Security",description:"Learn the dos and don'ts of creating strong passwords.",difficulty:"Easy",icon:(0,i.jsx)(T.A,{className:"h-10 w-10 text-primary"})},{topic:"Social Engineering 101",title:"Social Engineering",description:"Recognize psychological manipulation tactics used by attackers.",difficulty:"Easy",icon:(0,i.jsx)(R.A,{className:"h-10 w-10 text-primary"})},{topic:"Public Wi-Fi Safety",title:"Public Wi-Fi Safety",description:"Understand the risks of using public Wi-Fi networks.",difficulty:"Easy",icon:(0,i.jsx)(B.A,{className:"h-10 w-10 text-primary"})},{topic:"Smishing and Vishing",title:"Smishing & Vishing",description:"Learn about phishing attacks via SMS and voice calls.",difficulty:"Medium",icon:(0,i.jsx)(C.A,{className:"h-10 w-10 text-primary"})},{topic:"Malware Recognition",title:"Malware Recognition",description:"Identify different types of malicious software.",difficulty:"Medium",icon:(0,i.jsx)(P.A,{className:"h-10 w-10 text-primary"})},{topic:"Secure Data Handling",title:"Secure Data Handling",description:"Best practices for managing and protecting sensitive files.",difficulty:"Medium",icon:(0,i.jsx)(k.A,{className:"h-10 w-10 text-primary"})},{topic:"Advanced Email Scams",title:"Advanced Email Scams",description:"Dive into sophisticated email threats like BEC.",difficulty:"Medium",icon:(0,i.jsx)(L.A,{className:"h-10 w-10 text-primary"})},{topic:"QR Code Security",title:"QR Code Security",description:"Understand the dangers of malicious QR codes.",difficulty:"Medium",icon:(0,i.jsx)(D.A,{className:"h-10 w-10 text-primary"})},{topic:"Network Security Basics",title:"Network Security",description:"Learn about firewalls, VPNs, and secure network configs.",difficulty:"Hard",icon:(0,i.jsx)(U.A,{className:"h-10 w-10 text-primary"})},{topic:"AI-Powered Phishing Threats",title:"AI-Powered Threats",description:"Explore the new age of AI-driven phishing attacks.",difficulty:"Hard",icon:(0,i.jsx)(F.A,{className:"h-10 w-10 text-primary"})},{topic:"Business Email Compromise (BEC)",title:"BEC Attacks",description:"Deep dive into targeted attacks on corporate emails.",difficulty:"Hard",icon:(0,i.jsx)(z.A,{className:"h-10 w-10 text-primary"})},{topic:"Ransomware Attack Vectors",title:"Ransomware Vectors",description:"Identify how ransomware infects systems and how to prevent it.",difficulty:"Hard",icon:(0,i.jsx)(O.A,{className:"h-10 w-10 text-primary"})},{topic:"Biometric Security",title:"Biometric Security",description:"Assess the strengths and weaknesses of biometric authentication.",difficulty:"Hard",icon:(0,i.jsx)(M.A,{className:"h-10 w-10 text-primary"})},{topic:"Supply Chain Attacks",title:"Supply Chain Attacks",description:"Learn how attackers compromise trusted software vendors.",difficulty:"Hard",icon:(0,i.jsx)(X.A,{className:"h-10 w-10 text-primary"})},{topic:"Cybersecurity Laws & Ethics",title:"Cybersecurity Law",description:"Understand the legal and ethical landscape of cybersecurity.",difficulty:"Hard",icon:(0,i.jsx)(H.A,{className:"h-10 w-10 text-primary"})},{topic:"Zero-Day Exploits",title:"Zero-Day Exploits",description:"Learn about vulnerabilities unknown to those who should fix them.",difficulty:"Hard",icon:(0,i.jsx)(q.A,{className:"h-10 w-10 text-primary"})},{topic:"Spear Phishing",title:"Spear Phishing",description:"Identify highly targeted and personalized phishing attacks.",difficulty:"Medium",icon:(0,i.jsx)(Q.A,{className:"h-10 w-10 text-primary"})},{topic:"Insider Threats",title:"Insider Threats",description:"Recognize threats originating from within an organization.",difficulty:"Hard",icon:(0,i.jsx)(R.A,{className:"h-10 w-10 text-primary"})},{topic:"IoT Security",title:"IoT Security",description:"Secure your smart home and other connected devices.",difficulty:"Medium",icon:(0,i.jsx)(C.A,{className:"h-10 w-10 text-primary"})}];function J(e){let{topic:t,formAction:s,isLocked:r}=e;return(0,i.jsxs)(n.Zp,{className:(0,o.cn)("transition-all",r&&"blur-sm grayscale pointer-events-none relative"),children:[(0,i.jsxs)("form",{action:s,children:[(0,i.jsxs)(n.aR,{className:"items-center text-center",children:[t.icon,(0,i.jsx)(n.ZB,{children:t.title}),(0,i.jsx)(n.BT,{children:t.description})]}),(0,i.jsxs)(n.wL,{children:[(0,i.jsx)("input",{type:"hidden",name:"topic",value:t.topic}),(0,i.jsx)("input",{type:"hidden",name:"difficulty",value:t.difficulty}),(0,i.jsxs)(a.$,{type:"submit",className:"w-full",disabled:r,children:["Start Quiz",(0,i.jsx)(G.A,{className:"ml-2 h-4 w-4"})]})]})]}),r&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 rounded-lg",children:(0,i.jsx)(O.A,{className:"h-12 w-12 text-white"})})]})}function $(){let{user:e}=(0,A.A)(),[t,s,a]=(0,r.useActionState)(K,W),[n,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[m,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(e){let t=(0,j.aQ)((0,j.H9)(S.db,"users",e.uid),e=>{u(e.data()),f(!1)});return()=>t()}f(!1)},[e]),(0,r.useEffect)(()=>{if((null==t?void 0:t.questions)&&t.questions.length>0&&(null==t?void 0:t.topic)){let e=Y.find(e=>e.topic===t.topic);e&&(o(e),l(t.questions))}},[t]);let p=e=>{let t=e.get("topic"),i=Y.findIndex(e=>e.topic===t);if(i>0){var r,a;let e=Y[i-1];if((null!=(a=null==d||null==(r=d.quizScores)?void 0:r[e.title])?a:0)<5)return}s(e)};return m?(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)(Z.A,{className:"h-8 w-8 animate-spin"})}):a?(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 text-center h-full p-4",children:[(0,i.jsx)(Z.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,i.jsx)("h2",{className:"text-xl sm:text-2xl font-bold",children:"Generating Your Quiz..."}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"The AI is crafting questions just for you. Please wait a moment."})]}):n&&c?(0,i.jsx)(_,{questions:n,topicTitle:c.title,onFinish:()=>{l(null),o(null)}}):(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Knowledge Quiz"}),(0,i.jsx)("p",{className:"text-muted-foreground mt-1",children:"Select a topic to test your skills. Get a perfect score to unlock the next level!"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Y.map((e,t)=>{var s,r;let a=0===t,n=a?null:Y[t-1],l=n&&null!=(r=null==d||null==(s=d.quizScores)?void 0:s[n.title])?r:0;return(0,i.jsx)(J,{topic:e,formAction:p,isLocked:!a&&l<5},e.topic)})})]})}},4859:(e,t,s)=>{Promise.resolve().then(s.bind(s,4289))},4944:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var i=s(5155),r=s(2115),a=s(5863),n=s(9434);let l=r.forwardRef((e,t)=>{let{className:s,value:r,...l}=e;return(0,i.jsx)(a.bL,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,i.jsx)(a.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=a.bL.displayName},5057:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var i=s(5155),r=s(2115),a=s(968),n=s(2085),l=s(9434);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(a.b,{ref:t,className:(0,l.cn)(c(),s),...r})});o.displayName=a.b.displayName},6695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>l,wL:()=>u});var i=s(5155),r=s(2115),a=s(9434);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var i=s(2115);let r=0,a=new Map,n=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||i()}}}),{id:s,dismiss:i,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=i.useState(o);return i.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},8030:(e,t,s)=>{"use strict";s.d(t,{A:()=>u,AuthProvider:()=>d});var i=s(5155),r=s(2115),a=s(5695),n=s(3004),l=s(2437),c=s(5317);let o=(0,r.createContext)(void 0),d=e=>{let{children:t}=e,[s,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!0),h=(0,a.useRouter)();(0,r.useEffect)(()=>{let e=(0,n.hg)(l.j,async e=>{d(e),e?m(!!(await (0,n.yx)(e)).claims.admin):m(!1),p(!1)});return()=>e()},[]);let x=e=>{console.error("Firebase Auth Error:",e);let t="An unknown authentication error occurred.";return"auth/email-already-in-use"===e.code?t="This email is already registered. Please sign in or use a different email.":"auth/invalid-credential"===e.code||"auth/wrong-password"===e.code||"auth/user-not-found"===e.code?t="Invalid credentials. Please check your email and password and try again.":e.message&&(t=e.message),{error:t}},g=async e=>{let t=(0,c.H9)(l.db,"users",e.uid);if((await (0,c.x7)(t)).exists())await (0,c.BN)(t,{lastLoginAt:(0,c.O5)()},{merge:!0});else{var s;await (0,c.BN)(t,{uid:e.uid,email:e.email,displayName:e.displayName,username:e.displayName||(null==(s=e.email)?void 0:s.split("@")[0])||"",photoURL:e.photoURL,phone:"",quizScores:{},contributions:{url:0,email:0,sms:0},readArticles:[],createdAt:(0,c.O5)(),lastLoginAt:(0,c.O5)()},{merge:!0})}},y=async()=>{let e=new n.HF;try{let t=await (0,n.df)(l.j,e);return await g(t.user),h.push("/"),{}}catch(e){return x(e)}},N=async(e,t)=>{try{let s=await (0,n.x9)(l.j,e,t);return await g(s.user),h.push("/"),{}}catch(e){return x(e)}},v=async(e,t)=>{try{let s=await (0,n.eJ)(l.j,e,t),i=e.split("@")[0];await (0,n.r7)(s.user,{displayName:i});let r={...s.user,displayName:i};return await g(r),h.push("/"),{}}catch(e){return x(e)}},w=async()=>{try{await (0,n.CI)(l.j),h.push("/login")}catch(e){console.error("Error signing out",e)}};return(0,i.jsx)(o.Provider,{value:{user:s,loading:f,isAdmin:u,signInWithGoogle:y,signOut:w,signInWithEmail:N,signUpWithEmail:v},children:t})},u=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var i=s(2596),r=s(9688);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,i.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,416,277,950,443,54,441,684,358],()=>t(4859)),_N_E=e.O()}]);